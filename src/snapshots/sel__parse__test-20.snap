---
source: src/parse.rs
expression: "t(b\"\nuse :path/a: a,, # extra comma\nuse :path/b: b # missing comma\nuse :path/c: _,\nuse path name,\nuse :actual path:, # not even registered\nuse :again path: 42, # registered with a bad name\nuse not-bytes, # not even registered\nuse not-bytes 123123 # not even registered\n\")"
---
(
    Top {
        uses: [
            Use {
                loc_use: Location(
                    "<test>",
                    1..4,
                ),
                loc_path: Location(
                    "<test>",
                    5..13,
                ),
                path: "path/a",
                loc_prefix: Location(
                    "<test>",
                    14..15,
                ),
                prefix: "a",
            },
            Use {
                loc_use: Location(
                    "<test>",
                    32..35,
                ),
                loc_path: Location(
                    "<test>",
                    36..44,
                ),
                path: "path/b",
                loc_prefix: Location(
                    "<test>",
                    45..46,
                ),
                prefix: "b",
            },
            Use {
                loc_use: Location(
                    "<test>",
                    63..66,
                ),
                loc_path: Location(
                    "<test>",
                    67..75,
                ),
                path: "path/c",
                loc_prefix: Location(
                    "<test>",
                    76..77,
                ),
                prefix: "token '_'",
            },
            Use {
                loc_use: Location(
                    "<test>",
                    79..82,
                ),
                loc_path: Location(
                    "<test>",
                    83..87,
                ),
                path: "word 'path'",
                loc_prefix: Location(
                    "<test>",
                    88..92,
                ),
                prefix: "name",
            },
            Use {
                loc_use: Location(
                    "<test>",
                    135..138,
                ),
                loc_path: Location(
                    "<test>",
                    139..151,
                ),
                path: "again path",
                loc_prefix: Location(
                    "<test>",
                    152..154,
                ),
                prefix: "number '42'",
            },
        ],
        defs: [],
        script: None,
    },
    [
        Error(
            Location(
                "<test>",
                16..17,
            ),
            Unexpected {
                token: Comma,
                expected: "a single ',' between 'use's",
            },
        ),
        Error(
            Location(
                "<test>",
                32..35,
            ),
            ContextCaused {
                error: Error(
                    Location(
                        "<test>",
                        63..66,
                    ),
                    Unexpected {
                        token: Use,
                        expected: "a ',' (because of prior 'use')",
                    },
                ),
                because: Unmatched {
                    open_token: Use,
                },
            },
        ),
        Error(
            Location(
                "<test>",
                63..66,
            ),
            ContextCaused {
                error: Error(
                    Location(
                        "<test>",
                        76..77,
                    ),
                    Unexpected {
                        token: Unknown(
                            "_",
                        ),
                        expected: "file path then identifier after 'use' keyword",
                    },
                ),
                because: Unmatched {
                    open_token: Use,
                },
            },
        ),
        Error(
            Location(
                "<test>",
                79..82,
            ),
            ContextCaused {
                error: Error(
                    Location(
                        "<test>",
                        83..87,
                    ),
                    Unexpected {
                        token: Word(
                            "path",
                        ),
                        expected: "file path then identifier after 'use' keyword",
                    },
                ),
                because: Unmatched {
                    open_token: Use,
                },
            },
        ),
        Error(
            Location(
                "<test>",
                94..97,
            ),
            ContextCaused {
                error: Error(
                    Location(
                        "<test>",
                        111..112,
                    ),
                    Unexpected {
                        token: Comma,
                        expected: "file path then identifier after 'use' keyword",
                    },
                ),
                because: Unmatched {
                    open_token: Use,
                },
            },
        ),
        Error(
            Location(
                "<test>",
                135..138,
            ),
            ContextCaused {
                error: Error(
                    Location(
                        "<test>",
                        152..154,
                    ),
                    Unexpected {
                        token: Number(
                            42.0,
                        ),
                        expected: "file path then identifier after 'use' keyword",
                    },
                ),
                because: Unmatched {
                    open_token: Use,
                },
            },
        ),
        Error(
            Location(
                "<test>",
                185..188,
            ),
            ContextCaused {
                error: Error(
                    Location(
                        "<test>",
                        189..198,
                    ),
                    Unexpected {
                        token: Word(
                            "not-bytes",
                        ),
                        expected: "file path then identifier after 'use' keyword",
                    },
                ),
                because: Unmatched {
                    open_token: Use,
                },
            },
        ),
        Error(
            Location(
                "<test>",
                222..225,
            ),
            ContextCaused {
                error: Error(
                    Location(
                        "<test>",
                        226..235,
                    ),
                    Unexpected {
                        token: Word(
                            "not-bytes",
                        ),
                        expected: "file path then identifier after 'use' keyword",
                    },
                ),
                because: Unmatched {
                    open_token: Use,
                },
            },
        ),
    ],
)
